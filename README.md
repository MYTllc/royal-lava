
# Royal-Lava <img src="https://cdn.discordapp.com/avatars/1348283470371094619/6fa8ec5e19ce5fbcc65b690a3a42e24d.webp?size=40" align="right" alt="Lavalink Logo"/>

![alt text](https://img.shields.io/npm/v/royal-lava?style=for-the-badge&logo=npm)  
![alt text](https://img.shields.io/npm/dt/royal-lava?style=for-the-badge&logo=npm)  
![alt text](https://cdn.discordapp.com/avatars/1348283470371094619/6fa8ec5e19ce5fbcc65b690a3a42e24d.webp?size=4096)  

**Royal-Lava** ูู ุฃูู ููุชุจุฉ Lavalink v4 ูุจุฑูุฌุฉ ูู ูุจู ูุจุฑูุฌ ุนุฑุจู ูู ุงูุนุฑุงูุ  
ููู ููุชุจุฉ ูููุฉ ููุชุทูุฑุฉ ุชุชูุญ ูู ุจูุงุก ุจูุชุงุช ููุณููู ูุชูุฏูุฉ ูุฏูุณููุฑุฏุ ูุน ุงูุชุฑููุฒ ุนูู ุงูุงุณุชูุฑุงุฑ ูุฅุฏุงุฑุฉ ุงูุนูุฏ ุงููุชุนุฏุฏุฉ ูุงุณุชุฆูุงู ุงูุฌูุณุงุช ููุธุงู ูุงุฆูุฉ ุชุดุบูู ููู.

---

## โจ ุงููููุฒุงุช  

๐ **ุฏุนู Lavalink v4 ุจุงููุงูู**  
ูุชูุงููุฉ ูุน ูุงุฌูุงุช REST ู WebSocket ุงูุฎุงุตุฉ ุจู Lavalink v4.

๐ **ุฅุฏุงุฑุฉ ูุชุนุฏุฏุฉ ููุนูุฏ**  
- ุงูุงุชุตุงู ุจุนุฏุฉ ุนูุฏ Lavalink ูุฅุฏุงุฑุชูุง ูู ููุช ูุงุญุฏ.  
- ุงุฎุชูุงุฑ ุงูุนูุฏุฉ ุงูุฃูุถู ุชููุงุฆููุง ุจูุงุกู ุนูู ุงูุฃุฏุงุก (ุงููุนุงูุฌุ ุงูุฐุงูุฑุฉุ ุนุฏุฏ ุงููุดุบูุงุช).  
- ุฅุถุงูุฉ ูุฅุฒุงูุฉ ุงูุนูุฏ ุฃุซูุงุก ุงูุชุดุบูู.  

๐ **ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงููููุฉ**  
- ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุชููุงุฆููุง ูู ุญุงูุฉ ุฅุบูุงู WebSocket ุบูุฑ ุงููุชููุน.  
- ุงุณุชุฑุงุชูุฌูุงุช ูุชูุฏูุฉ ููุญุฏ ูู ุนูููุงุช ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุนุดูุงุฆูุฉ.  
- ุนุฏุฏ ูุญุงููุงุช ุฅุนุงุฏุฉ ุงูุงุชุตุงู ูุงุจู ููุชุฎุตูุต.  

๐ **ุงุณุชุฆูุงู ุงูุฌูุณุงุช**  
- ุงุณุชุบูุงู ููุฒุฉ ุงุณุชุฆูุงู ุงูุฌูุณุงุช ูู Lavalink v4 ูุงุณุชุนุงุฏุฉ ุงูุญุงูุฉ ุจุณุฑุนุฉ ุจุนุฏ ุงููุทุงุน ูุตูุฑ.  
- ุฎูุงุฑุงุช ูุงุจูุฉ ููุชุฎุตูุต ูููุชุงุญ ุงูุงุณุชุฆูุงู ููุชุฑุฉ ุงููููุฉ.  

๐ถ **ุชุญูู ูุชูุฏู ูู ุงููุดุบู**  
- `play()`: ุชุดุบูู ุงููุณุงุฑุงุช ูุน ุฎูุงุฑุงุช ูุชุนุฏุฏุฉ (ุชูููุช ุงูุจุฏุก/ุงูุงูุชูุงุกุ ุงูุฅููุงู ุงููุคูุชุ ุงูุงุณุชุจุฏุงู).  
- `stop()`: ุฅููุงู ุงูุชุดุบูู ูุฅููุงููุฉ ูุณุญ ุงููุงุฆูุฉ.  
- `pause() / resume()`: ุฅููุงู ุฃู ุงุณุชุฆูุงู ุงูุชุดุบูู.  
- `skip()`: ุชุฎุทู ุงููุณุงุฑ ุงูุญุงูู.  
- `seek()`: ุงูุงูุชูุงู ุฅูู ููุทุฉ ูุนููุฉ ูู ุงููุณุงุฑ.  
- `setVolume()`: ุถุจุท ูุณุชูู ุงูุตูุช ุจูู 0-1000.  
- `setLoop()`: ุชุนููู ูุถุน ุงูุชูุฑุงุฑ (ูุง ุดูุกุ ูุณุงุฑุ ูุงุฆูุฉ).  

๐ถ **ูุธุงู ูุงุฆูุฉ ุชุดุบูู ูุชุทูุฑ**  
- ุฅุถุงูุฉ ูุณุงุฑ ูุงุญุฏ ุฃู ูุชุนุฏุฏ ุฅูู ุงููุงุฆูุฉ.  
- ุฅุฏุฑุงุฌ ูุณุงุฑุงุช ูู ููุงูุน ูุนููุฉ.  
- ุงุณุชุฑุฌุงุน ุงููุณุงุฑ ุงูุชุงูู ุชููุงุฆููุง ูุฅุฏุงุฑุฉ ุงูุชูุฑุงุฑ.  
- ุฅุฒุงูุฉ ุงููุณุงุฑุงุช ุจูุงุณุทุฉ ุงูููุฑุณ ุฃู ุงููุงุฆู.  
- ูุณุญ ุงููุงุฆูุฉ ุจุงููุงูู.  
- ุฎูุท ุชุฑุชูุจ ุงููุณุงุฑุงุช.  
- ุชุชุจุน ุงููุณุงุฑุงุช ุงูุณุงุจูุฉ ูู history.  

๐ **ุชูุงูู ุณูุณ ูุน Discord**  
- ูุชูุงูู ูุน ููุชุจุงุช Discord ูุซู discord.js ู eris.  
- ูุชุทูุจ ุชูููุฑ ุฏุงูุฉ ูุฅุฑุณุงู ุญุฒู ุงูุตูุช ุฅูู ุจูุงุจุฉ Discord.  
- ูุฏูุฑ ุญุงูุฉ ุงุชุตุงู ุงูุตูุช ุชููุงุฆููุง.  

โ๏ธ **ููู ุงููุดุบู ุจูู ุงูุนูุฏ**  
- `player.moveToNode(newNode)`: ููู ูุดุบู ูุดุท ูู ุนูุฏุฉ ุฅูู ุฃุฎุฑู ุจุฏูู ุงููุทุงุนุ ูููุฏ ูุตูุงูุฉ ุงูุนูุฏ.  

๐ฅ **ูุธุงู ุฃุญุฏุงุซ ููู**  
- ูุตุฏุฑ ูุฌููุนุฉ ูุงุณุนุฉ ูู ุงูุฃุญุฏุงุซ ููุฑุงูุจุฉ ุงูุนูููุงุช ูุชูููุฐ ุงูููุทู ุงููุฎุตุต.  

๐ก **ุชุฌุฑูุฏ ูุงุฌูุฉ REST**  
- ูููุฑ ุทุฑููุง ูุธููุฉ ููุชูุงุนู ูุน REST API ุงูุฎุงุต ุจู Lavalink.  
- ูุดูู ุขููุงุช ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุนูุฏ ุญุฏูุซ ูููุงุช.  

---

## ๐ ุงููุชุทูุจุงุช  
- Node.js v18.0.0 ุฃู ุฃุญุฏุซ  
- NPM ุฃู Yarn  
- ุฎุงุฏู Lavalink v4 ููุฏ ุงูุชุดุบูู  

## ๐ง ุงูุชุซุจูุช  

```bash
npm install royal-lava
# ุฃู
yarn add royal-lava
```

**ุชุญุชุงุฌ ุฃูุถูุง ุฅูู ููุชุจุฉ Discord (ูุซู discord.js) ูุญุฒูุฉ ws.**  

```bash
npm install discord.js ws
# ุฃู
yarn add discord.js ws
```

---

## ๐ ูุซุงู ููุงุณุชุฎุฏุงู ุงูุฃุณุงุณู ูุน Discord.js  

```js
const { Manager, Constants } = require('royal-lava');
const { Client, GatewayIntentBits, Partials, Events } = require('discord.js'); 

const client = new Client({
    intents: [
        GatewayIntentBits.Guilds,
        GatewayIntentBits.GuildVoiceStates,
        GatewayIntentBits.GuildMessages,
        GatewayIntentBits.MessageContent,
    ],
    partials: [Partials.Channel],
});

const nodes = [
    {
        host: 'localhost',
        port: 2333,
        password: 'youshallnotpass',
        identifier: 'Main Node',
        secure: false,
        resumeKey: `royal-lava-example-${process.pid}`,
        resumeTimeout: 60,
        retryAmount: 3,
        retryDelay: 500,
    },
];

client.lavalink = new Manager({
    nodes: nodes,
    userId: null,
    send: (guildId, payload) => {
        const guild = client.guilds.cache.get(guildId);
        if (guild?.shard?.ws?.readyState === 1) {
            guild.shard.send(payload);
        }
    },
    playerOptions: {
        initialVolume: 80,
        selfDeaf: true,
    },
});

client.once(Events.ClientReady, () => {
    console.log(`ุชู ุชุณุฌูู ุงูุฏุฎูู ุจุงุณู ${client.user.tag}!`);
    client.lavalink.userId = client.user.id;
});

client.on(Events.InteractionCreate, async interaction => {
    if (!interaction.isChatInputCommand() || !interaction.guildId) return;

    const { commandName } = interaction;

    if (commandName === 'play') {
        await interaction.deferReply();
        const query = interaction.options.getString('query', true);
        const memberChannel = interaction.member?.voice?.channel;

        if (!memberChannel) {
            return interaction.editReply({ content: 'ูุฌุจ ุฃู ุชููู ูู ููุงุฉ ุตูุชูุฉ ูุชุดุบูู ุงูููุณููู!' });
        }

        let player = client.lavalink.getPlayer(interaction.guildId);
        if (!player) {
            player = client.lavalink.createPlayer(interaction.guildId);
            player.connect(memberChannel.id);
        }

        try {
            const searchResult = await client.lavalink.loadTracks(query);
            if (!searchResult.data?.length) {
                return interaction.editReply({ content: 'ูู ูุชู ุงูุนุซูุฑ ุนูู ูุชุงุฆุฌ.' });
            }

            const track = searchResult.data[0];
            player.queue.add(track);
            await interaction.editReply({ content: `ุชูุช ุฅุถุงูุฉ **${track.info.title}** ุฅูู ุงููุงุฆูุฉ.` });

            if (!player.playing) {
                await player.play();
            }
        } catch (error) {
            console.error('[ุฎุทุฃ ูู ุงูุชุดุบูู]', error);
            await interaction.editReply({ content: `ุญุฏุซ ุฎุทุฃ: ${error.message}` });
        }
    }
});

client.login('TOKEN');
```

---

## ๐ ุงูุฃุญุฏุงุซ ุงููุฏุนููุฉ  

```js
client.lavalink.on(Constants.CLIENT_EVENT_TYPES.NODE_CONNECT, node => {
    console.log(`[Node] ูุชุตู: ${node.identifier}`);
});

client.lavalink.on(Constants.CLIENT_EVENT_TYPES.TRACK_START, (player, track) => {
    console.log(`[Track] ุจุฏุก ุชุดุบูู: ${track.info.title}`);
});

client.lavalink.on(Constants.CLIENT_EVENT_TYPES.TRACK_END, (player, track, payload) => {
    console.log(`[Track] ุงูุชูู ุงูุชุดุบูู: ${track.info.title}`);
});
```

---

## ๐ ููุงุญุธุงุช  
- ููุชุจุฉ **Royal-Lava** ุชุฑูุฒ ุนูู ุงูุฃุฏุงุก ุงูุนุงูู ูุงูุงุณุชูุฑุงุฑ.  
- ูุชู ุชุญุฏูุซูุง ุจุงุณุชูุฑุงุฑ ูุฏุนู ุฃุญุฏุซ ุฅุตุฏุงุฑุงุช Lavalink ู Discord.js.  
